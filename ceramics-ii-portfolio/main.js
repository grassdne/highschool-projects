const allProjects = [
    {
        code: "dragon",
        name: "Dragon Eye",
        headerImage: "images/dragon_eye_finished_01.jpg",
        reflection: `
      This project reinforced some basic concepts such as the importance of keeping the width of clay consistent and proper slip &amp; scoring.
        I also learned how much value texture adds to a peace.
        <div>
          Design: I felt comfortable leaving my design fluid and naturally evolving for this piece.
        </div>
        I learned a good way to keep something feeling whole and united is to take a part already done and replicate it but on another (smaller or larger) scale.
        I learned that when I want a bunch of little pieces in a row (here the scale-like parts curling around the left side of the eye), I should add a single long piece and then cut out spaces.
        My red glaze came out rather messy, and has a peculiar bleeding effect.
        I learned to keep glazing as simple as possible.
        If I had to make a new eye I would probably glaze it all a single color, or two layered colors if I want a nice effect.
        `,
        images: [
            { src: "images/dragon_eye_mood_board.png",  caption: "inspiration mood board" },
            { src: "images/dragon_eye_wetclay.jpg",     caption: "wetclay; no texture" },
            { src: "images/dragon_eye_bisque.jpg",      caption: "bisque; unglazed" },
            { src: "images/dragon_eye_finished_01.jpg", caption: "finished piece" },
            { src: "images/dragon_eye_finished_02.jpg", caption: "finished piece" },
        ]
    },
    {
        code: "mug",
        name: "Face Mug",
        headerImage: "images/face_mug_finished_front.jpg",
        reflection: `
        My face pot represents the secrets and lies we hold within us. It is meant to look disturbing, gruesome, and protuded. <br>
        I learned how to make a nice, proper, simple handle. It needs to dry in a mold for a bit before it can be attached. And when attaching I simply need to have faith in the slip &amp; score; there's no need to try and give it extra support or blend the ends in or do whatever weird thing I was doing before. <br>
        The challenge with analyzing pieces meant to look crude is of intentionality. Which elements were thoughtfully, meaningfully, intionally placed there, and which are errors mitigated with "I like it that way"? If I were to repeat this process I would make sure to be very thoughtful and intentional about each choice.
        `,
        images: [
            { src: "images/face_mug_throw.jpg",             caption: "mug thrown on wheel" },
            { src: "images/face_mug_wetclay_frontview.jpg", caption: "attachments added" },
            { src: "images/face_mug_wetclay_sideview.jpg",  caption: "leather-hard" },
            { src: "images/face_mug_bisque.jpg",            caption: "left side; bisque" },
            { src: "images/face_mug_bisque_side_2.jpg",     caption: "right side; bisque" },
            { src: "images/face_mug_glazed_1.jpg",          caption: "glazed" },
            //{ src: "images/face_mug_glazed_2.jpg",        caption: "" },
            { src: "images/face_mug_finished_side_1.jpg",   caption: "finished; left side" },
            { src: "images/face_mug_finished_front.jpg",    caption: "finished; front view" },
        ]
    },
    {
        code: "companions",
        name: "Companions",
        headerImage: "images/companions_04.jpg",
        images: [
            { src: "images/companions_00.jpg", caption: "WIP snake tray; I made two coils knowning that one of them would probably break off." },
            { src: "images/companions_01.jpg", caption: "pots; side view" },
            { src: "images/companions_02.jpg", caption: "pots; birds eye" },
            { src: "images/companions_03.jpg", caption: "final snake tray" },
            { src: "images/companions_04.jpg", caption: "flower pot; greenware" },
        ],
        reflection: `
        My companion project was a plant pot and a tray, and I made two sets of companions. Both pots were built on the wheel. One is a flower pot and the other has a snake tray. I mistakenly bisque fired both of them before doing sgrafitto. This was very dissapointing and I wish I had time to redo this project.
        `
    },
    {
        code: "wheel",
        name: "The Wheel",
        headerImage: "images/face_mug_throw.jpg",
        reflection: `
<pre>
O how I ache to dance to you!
To spin, grow, shape earthly food.
Why, we could throw the world anew,
if not each time came vicisitude.
</pre>
        <br>
        I have used the wheel for two projects rather successfully: the face mug and the companions.
        These were a simple but sizeable mug and flower pot.
        I would say my experience on the wheel this year was frustrating in that it felt different each day.
        Each day there were always different problems.<br>
        Something different from last year is that in Ceramics 1 everything I made was miniature but this year I was able to make larger pottery on the wheel.<br>
        I chose not to use the wheel for the last two projects for several reasons:
        <ol>
          <li>I simply didn't have the time and energy for it. I needed to get things done reliably, not play on the wheel.</li>
          <li>My design was based on more complex forms that couldn't be easily done on the wheel.</li>
          <li>Ms. Mitchel said not to handbuild part of a piece and throw the other part.</li>
          <li>I still have pleanty to learn and experiment with in both the wheel and handbuilding.</li>
        </ol>
        `,
    },
    {
        code: "canopic",
        name: "Canopic Jar",
        headerImage: "images/canopic_jar_wet_assembled_2.jpg",
        images: [
            { src: "images/mood_board_canopic_jar.png",          caption: "mood board", width: "600" },
            { src: "images/canopic_jar_model.jpg",               caption: "proof of concept for build technique" },
            { src: "images/canopic_jar_base_wet_top_wip.jpg",    caption: "building" },
            { src: "images/canopic_jar_base_wet_top.jpg",        caption: "top view" },
            { src: "images/canopic_jar_base_wet_upsidedown.jpg", caption: "upsidedown; attaching bottom" },
            { src: "images/canopic_jar_wet_side.jpg",            caption: "base built" },
            { src: "images/canopic_jar_wet_1.jpg",               caption: "tentacles attached" },
            { src: "images/canopic_jar_wet_lid.jpg",             caption: "lid" },
            //{ src: "images/canopic_jar_wet_assembled_1.jpg",     caption: "assembled" },
            { src: "images/canopic_jar_wet_assembled_2.jpg",     caption: "assembled" },
            { src: "images/canopic_jar_wet_parts.jpg",           caption: "the parts" },
            { src: "images/canopic_jar_bisque_assembled_1.jpg",  caption: "bisque" },
            { src: "images/canopic_jar_glazed.jpg",              caption: "glazed" },
        ],
        reflection: `
        My canopic jar holds dreams. It consists of a cone-like jar built using a special spiraling technique. It ends in a star shaped top. The top is a jellyfish. There are tentacles hanging down attached to the jar ending in swirls. There is another, smaller jellyfish lid on top of the jellyfish lid with little jellyfish tentacle legs. I was inspired by a particular scene from the film <i>Ponyo</i> with a little jellyfish on top of a big jellfish, and these peculiar, magical, cute creatures from DnD called flumphs.<br>
        This piece was a lot of fun, but I may have gone a bit too wild in several aspects. The tentacles were simply too delicate, and too many have now broken off. However, I find that having parts where space goes through and around adds so much to a piece.
        `,
    },
    {
        code: "lamp",
        name: "Luminary",
        headerImage: "images/lamp_hood_cut_3.jpg",
        images: [
            { src: "images/luminary_sketch.jpg", caption: "design" },
            { src: "images/lamp_first_attempt.jpg", caption: "first attempt lamp" },
            //{ src: "images/lamp_hard_base.jpg", caption: "" },
            { src: "images/lamp_leather_hood.jpg", caption: "lamp, redux" },
            { src: "images/lamp_hood_cut_wip.jpg", caption: "cutting" },
            { src: "images/lamp_hood_cut_wip_1.jpg", caption: "more cutting" },
            { src: "images/lamp_hood_cut_1.jpg", caption: "quite a bit of cutting" },
            { src: "images/lamp_hood_cut_3.jpg", caption: "bisque; glazed" },
            { src: "images/lamp_hood_cut_2.jpg", caption: "bisque; glazed" },
        ],
        reflection: `
        This is my most techinically strong and artistically refined piece.
        It's a mushroom lamp.
        There is a base and a cover, each made using two handbuilt parts attached together.
        My first cover broke completely apart midway through cutting.
        (Not while actively cutting, but between when I put it away and got it out again the next day.) 
        I was doing overly-complex cuttings, I wasn't taking enough time, and I wasn't actually happy with it.<br>
        In round two I did several things differently.
        I carved out the excess clay at the bottom of my pinch pot.
        (That's not the reason the first one broke.)
        I made it a mushroom top instead of a tree top (just a change in vision).
        I was patient to get to the perfect carving moisture.
        I used a new design for the carving.
        I thought I was making it as non-complex as possible: simple, conves shapes that fit together nicely.
        In practice this turned out to look exceedingly good and was plenty intricate.<br>
        These cut outs took at least three hours.
        I did everything carefully, methodically in three stages: first outlining a set of shapes, second cutting them all out, and finally pushing them all outwards from the inside.<br>
        On the bottom of the cover I also made mushroom ribs with sgrafitto.
        `,
    },
];

const headers = document.getElementById("headers");

const pulloutPadding = 20;
const DEFAULT_WIDTH = 400;

// Only one pulled out at a time
let pulledOut = null;

function pullOut(content) {
    content.hidden = false;
    const container = content.parentNode;
    const img = container.querySelector("img");
    currentHeight = container.getBoundingClientRect().height;
    let height = img.clientHeight;
    container.style.height = height + "px";
    const makeVisible = pulledOut != content;
    //content._visible = !content._visible;
    //const makeVisible = content._visible;

    if (makeVisible) {
        if (pulledOut) pullOut(pulledOut);
        pulledOut = content;
        height += content.clientHeight + pulloutPadding;
    } else {
        pulledOut = null;
    }
    setTimeout(() => {
        container.style.height = height + "px";
    }, 0);
}

function generateImages(project) {
    let code = `<div class="images">`;
    for ({src, caption, width} of project.images ?? []) {
        code += `
        <div style="margin: 1em 0;">
          <img src="${src}" width=${width ?? DEFAULT_WIDTH}>
          <div>${caption}</div>
        </div>`;
    }
    return code + `</div>`;
}

for (project of allProjects) {
    const elem = document.createElement("div");
    const contentId = project.code + "Content";
    elem.innerHTML = `
    <div class="pull-out">
      <div class="heading" onclick="pullOut(${contentId})">
        <img src="${project.headerImage}" width=100%>
        <div class="centered-text">${project.name}</div>
      </div>

      <div id="${contentId}" class="content" hidden=true>
        ${project.reflection}
        ${generateImages(project)}
      </div>

    </div>
    `;
    elem.children[0].style.padding = pulloutPadding + "px";
    headers.appendChild(elem);
}
